<!--
同步影响报告：
- 版本更改：无 → 1.0.0 → 1.1.0
- 创建日期：2025-10-13
- 最后修订：2025-10-14
- 添加的原则：8条核心开发原则
- 1.1.0 更新内容：
  - 新增 UI 组件规范章节
  - 新增图标使用规范（@vben/icons + @iconify/vue）
  - 明确禁止使用 @ant-design/icons-vue
- 需要更新的模板：
  ✅ spec-template.md - 已包含原则引用
  ✅ plan-template.md - 已包含宪章检查
  ✅ tasks-template.md - 已遵循原则
  ✅ constitution.md - 已添加图标规范
-->

# Alumni WebUI 项目宪章

**XX项目管理后台开发规范**

## 核心原则

### 一、认真查阅，拒绝盲猜

**以暗猜接口为耻，以认真查阅为荣**

- 必须查阅实际的 API 文档、类型定义或现有代码
- 禁止假设接口签名、参数类型或返回值结构
- 使用代码搜索、类型检查确认接口细节
- 不确定时，先查后用，避免试错式开发

**理由**：盲猜接口导致运行时错误、类型不匹配和集成问题，浪费调试时间。

---

### 二、明确执行，拒绝模糊

**以模糊执行为耻，以寻求确认为荣**

- 对不明确的需求或任务，必须先确认后执行
- 遇到歧义时，主动询问而非自行揣测
- 实施前确认：功能边界、UI 规范、业务规则
- 记录确认结果，避免反复沟通

**理由**：模糊执行导致返工、需求偏离和资源浪费。

---

### 三、人类确认，拒绝臆想

**以盲想业务为耻，以人类确认为荣**

- 业务逻辑必须与产品/业务方确认
- 不得基于"常识"或"经验"自行定义业务规则
- 复杂业务流程需要书面确认或会议记录
- 边界情况和异常处理需明确定义

**理由**：臆想业务逻辑偏离实际需求，导致功能无法使用或需大幅修改。

---

### 四、复用现有，拒绝重造

**以创造接口为耻，以复用现有为荣**

- 优先使用项目现有的组件、工具、API
- 新增功能前检查 `packages/`、`apps/` 中是否已有类似实现
- 遵循 DRY 原则，提取可复用逻辑
- 确需新建时，考虑通用性和未来复用

**理由**：重复造轮子增加维护成本、代码冗余，降低一致性。

---

### 五、主动测试，拒绝跳过

**以跳过验证为耻，以主动测试为荣**

- 开发完成后必须自测：功能正确性、边界情况、错误处理
- 提交前运行：`pnpm lint`、`pnpm check:type`
- 关键功能需编写单元测试或集成测试
- 修复 bug 时补充对应测试用例

**理由**：跳过验证将问题转嫁给测试或用户，降低软件质量和团队信任。

---

### 六、遵循架构，拒绝破坏

**以破坏架构为耻，以遵循规范为荣**

- 遵循 Monorepo 架构：`packages/` 为共享库，`apps/` 为应用
- 按分层原则组织代码：`models/`、`services/`、`api/`、`views/`
- 不跨层直接调用，不绕过既定的数据流
- 新增模块需符合现有目录结构和命名约定

**理由**：破坏架构导致代码混乱、难以维护、新人上手困难。

---

### 七、诚实无知，拒绝假装

**以假装理解为耻，以诚实无知为荣**

- 不懂的技术、业务或代码，坦诚提出
- 及时请教团队成员，不耻下问
- 记录学习过程，帮助后来者
- 主动分享踩坑经验和解决方案

**理由**：假装理解埋下隐患，诚实无知促进团队协作和知识共享。

---

### 八、谨慎重构，拒绝盲改

**以盲目修改为耻，以谨慎重构为荣**

- 重构前理解现有代码的设计意图和历史背景
- 大规模改动需团队评审，避免破坏现有功能
- 重构时保持小步快跑，及时验证
- 留存必要注释，说明重构原因和影响范围

**理由**：盲目修改引入新 bug，破坏稳定性，增加回归风险。

---

## 技术约束

### 技术栈（不可变更）

- **前端框架**：Vue 3 + TypeScript
- **构建工具**：Vite + Turbo
- **UI 库**：Ant Design Vue
- **包管理**：pnpm（workspace + monorepo）
- **代码规范**：ESLint + Prettier + Stylelint

### UI 组件规范

#### 图标使用规范

**必须使用**：

- 项目统一使用 `@iconify/vue`（通过 `@vben/icons` 包装）
- 禁止使用 `@ant-design/icons-vue` 或其他独立图标库

**推荐图标库**（按优先级）：

1. `mdi:*` - Material Design Icons（推荐，图标丰富，风格统一）
2. `ion:*` - Ionicons（简洁现代）
3. `lucide:*` - Lucide Icons（轻量优雅）

**使用方式**：

```vue
<script setup lang="ts">
import { IconifyIcon } from '@vben/icons';
</script>

<template>
  <!-- 基础用法 -->
  <IconifyIcon icon="mdi:plus" />

  <!-- 带样式 -->
  <IconifyIcon icon="mdi:account" class="text-xl text-blue-500" />

  <!-- 在按钮中使用 -->
  <AButton type="primary">
    <template #icon>
      <IconifyIcon icon="mdi:plus" />
    </template>
    添加
  </AButton>
</template>
```

**查找图标**：

- Material Design Icons: https://icon-sets.iconify.design/mdi/
- Ionicons: https://icon-sets.iconify.design/ion/
- Lucide: https://icon-sets.iconify.design/lucide/

**理由**：

- 统一图标库确保视觉一致性
- @iconify/vue 支持按需加载，性能更优
- 避免多个图标库增加打包体积

### 环境要求

- Node.js >= 20.10.0
- pnpm >= 9.12.0

### 提交规范

遵循 Angular 提交规范：

- `feat`: 新功能
- `fix`: 修复 bug
- `refactor`: 重构
- `docs`: 文档更新
- `style`: 代码格式（不影响功能）
- `test`: 测试相关
- `chore`: 构建/工具链更新

---

## 开发工作流

### 功能开发流程

1. **需求确认**：与产品/业务确认需求细节
2. **技术方案**：评审技术实现方案，检查是否有可复用组件
3. **开发实施**：遵循架构规范，编写代码
4. **自测验证**：功能测试 + 类型检查 + Lint 检查
5. **代码评审**：提交 PR，团队评审
6. **合并部署**：评审通过后合并

### 质量门控

**提交前必须通过**：

```bash
pnpm lint          # 代码规范检查
pnpm check:type    # TypeScript 类型检查
pnpm test:unit     # 单元测试（如有）
```

### Code Review 检查点

- ✅ 是否查阅了相关接口文档？
- ✅ 需求是否已明确确认？
- ✅ 是否复用了现有组件/工具？
- ✅ 是否进行了自测？
- ✅ 是否遵循了架构分层？
- ✅ 重构是否经过评审？

---

## 治理

### 宪章权威

- 本宪章优先于个人习惯和偏好
- 所有团队成员必须遵守核心原则
- 违反原则需在 Code Review 中指出并修正

### 修订流程

- 修订提案需团队讨论和投票
- 重大修订需 2/3 多数同意
- 修订后更新版本号并通知全员

### 合规检查

- Code Review 时检查是否符合原则
- 定期回顾宪章执行情况
- 收集反馈，持续改进

---

**版本**：1.1.0 | **批准日期**：2025-10-13 | **最后修订**：2025-10-14
